(function(){var c,d;c=this.jQuery;d=function(){function b(a){this.content=this.pane=this.slider=null;this.contentY=this.contentHeight=this.offsetY=this.sliderY=this.paneHeight=this.sliderHeight=this.scrollHeight=0;this.isDragging=!1;this.target=a;this.generateElements();this.createEventHandlers();this.assignListeners();this.reset()}b.prototype.createEventHandlers=function(){var a;a=this;this.handler=[];this.handler.onDown=function(b){a.isDragging=!0;a.offsetY=b.clientY-a.slider.offset().top;a.pane.addClass("active");
c(document).bind("mousemove",a.handler.onDrag);c(document).bind("mouseup",a.handler.onUp);return!1};this.handler.onDrag=function(b){a.sliderY=b.clientY-a.target.offset().top-a.offsetY;a.scroll();return!1};this.handler.onUp=function(){a.isDragging=!1;a.pane.removeClass("active");c(document).unbind("mousemove",a.handler.onDrag);c(document).unbind("mouseup",a.handler.onUp);return!1};this.handler.onResize=function(){a.reset();return a.scroll()};this.handler.onDownPane=function(b){a.sliderY=b.clientY-
a.target.offset().top-0.5*a.sliderHeight;a.scroll();return a.handler.onDown(b)};return this.handler.onScroll=function(){if(!0!==a.isDragging)return a.slider.css({top:Math.floor(a.content[0].scrollTop/a.content[0].scrollHeight*(a.paneHeight+5))})}};b.prototype.assignListeners=function(){c(window).bind("resize",this.handler.onResize);this.slider.bind("mousedown",this.handler.onDown);this.pane.bind("mousedown",this.handler.onDownPane);return this.content.bind("scroll",this.handler.onScroll)};b.prototype.removeEventListeners=
function(){c(window).unbind("resize",this.handler.onResize);this.slider.unbind("mousedown",this.handler.onDown);this.pane.unbind("mousedown",this.handler.onDownPane);return this.content.unbind("scroll",this.handler.onScroll)};b.prototype.getScrollbarWidth=function(){var a,b,c;b=document.createElement("div");document.createElement("div");b.style.position="absolute";b.style.width="100px";b.style.height="50px";b.style.overflow="scroll";document.body.appendChild(b);a=b.offsetWidth;c=b.scrollWidth;document.body.removeChild(b);
return a-c};b.prototype.generateElements=function(){this.target.append('<div class="pane"><div class="slider"></div></div>');this.content=c(this.target.children()[0]);this.slider=this.target.find(".slider");this.pane=this.target.find(".pane");this.scrollbarWidth=this.getScrollbarWidth();if(0===this.scrollbarWidth)this.scrollbarWidth=0;this.content.css({right:-this.scrollbarWidth+"px"});null!=c.browser.msie&&8>parseInt(c.browser.version)&&this.pane.hide()};b.prototype.reset=function(){this.contentHeight=
this.content[0].scrollHeight;this.paneHeight=this.pane.height();this.sliderHeight=this.paneHeight/this.contentHeight*this.paneHeight;this.scrollHeight=this.paneHeight-this.sliderHeight;this.slider.height(this.sliderHeight)};b.prototype.scroll=function(){var a;if(0>this.sliderY)this.sliderY=0;if(this.sliderY>this.scrollHeight)this.sliderY=this.scrollHeight;a=this.paneHeight-this.contentHeight+this.scrollbarWidth;a=a*this.sliderY/this.scrollHeight;this.content.scrollTop(-a);return this.slider.css({top:this.sliderY})};
b.prototype.scrollBottom=function(){this.reset();this.sliderY=this.scrollHeight;this.scroll()};b.prototype.scrollTop=function(){this.reset();this.sliderY=0;this.scroll()};b.prototype.stop=function(){this.removeEventListeners();return this.pane.hide()};return b}();c.fn.nanoScroller=function(b){var a,b=b||{};a=this.data("scrollbar");if(void 0===a)a=new d(this,b),this.data({scrollbar:a});else return a.reset(),"bottom"===b.scroll&&a.scrollBottom(),"top"===b.scroll&&a.scrollTop(),!0===b.stop&&a.stop(),
!1}}).call(this);