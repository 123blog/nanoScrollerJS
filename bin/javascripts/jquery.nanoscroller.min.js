/*! nanoScrollerJS v0.7.2 (c) 2013 James Florentino; Licensed MIT */

(function(e,t,n){"use strict";var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;C={paneClassY:"pane-y",sliderClass:"slider",contentClass:"content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null},S="scrollbar",E="scroll",h="mousedown",p="mousemove",v="mousewheel",d="mouseup",b="resize",a="drag",T="up",g="panedown",c="left",y="paneright",o="DOMMouseScroll",u="down",w="right",N="wheel",f="keydown",l="keyup",x="touchmove",r=t.navigator.appName==="Microsoft Internet Explorer"&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject,s=null,i=null,k=function(){var e,t,r,i;return e=n.createElement("div"),t=e.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow=E,t.top="-9999px",n.body.appendChild(e),i=e.offsetWidth-e.clientWidth,r=e.offsetHeight-e.clientHeight,n.body.removeChild(e),[i,r]},m=function(){function f(r,o){var u;this.el=r,this.options=o;if(!s||!i)u=k(),s=u[0],i=u[1];this.$el=e(this.el),this.doc=e(n),this.win=e(t),this.$content=this.$el.children("."+o.contentClass),this.$content.attr("tabindex",0),this.content=this.$content[0],this.options.iOSNativeScrolling&&this.el.style.WebkitOverflowScrolling!=null?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return f.prototype.preventVerticalScrolling=function(e,t){if(!this.isActive)return;if(e.type===o)(t===u&&e.originalEvent.detail>0||t===T&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===v){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(t===u&&e.originalEvent.wheelDelta<0||t===T&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},f.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},f.prototype.updateVerticalScrollValues=function(){var e;e=this.content,this.maxScrollTop=e.scrollHeight-e.clientHeight,this.contentScrollTop=e.scrollTop,this.iOSNativeScrolling||(this.maxSliderTop=this.yPaneHeight-this.ySliderHeight,this.ySliderTop=this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},f.prototype.createEvents=function(){var e=this;this.yEvents={down:function(t){return e.isBeingDragged=!0,e.offsetY=t.pageY-e.ySlider.offset().top,e.yPane.addClass("active"),e.doc.bind(p,e.yEvents[a]).bind(d,e.yEvents[T]),!1},drag:function(t){return e.ySliderY=t.pageY-e.$el.offset().top-e.offsetY,e.scrollY(),e.updateVerticalScrollValues(),e.contentScrollTop>=e.maxScrollTop?e.$el.trigger("scrollend"):e.contentScrollTop===0&&e.$el.trigger("scrolltop"),!1},up:function(t){return e.isBeingDragged=!1,e.yPane.removeClass("active"),e.doc.unbind(p,e.yEvents[a]).unbind(d,e.yEvents[T]),!1},resize:function(t){e.reset()},panedown:function(t){return e.ySliderY=(t.offsetY||t.originalEvent.layerY)-e.ySliderHeight*.5,e.scrollY(),e.yEvents.down(t),!1},scroll:function(t){if(e.isBeingDragged)return;e.updateVerticalScrollValues(),e.iOSNativeScrolling||(e.ySliderY=e.ySliderTop,e.ySlider.css({top:e.ySliderTop}));if(t==null)return;e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventVerticalScrolling(t,u),e.$el.trigger("scrollend")):e.contentScrollTop===0&&(e.options.preventPageScrolling&&e.preventVerticalScrolling(t,T),e.$el.trigger("scrolltop"))},wheel:function(t){if(t==null)return;return e.ySliderY+=-t.wheelDeltaY||-t.delta,e.scrollY(),!1}}},f.prototype.addEvents=function(){var e;this.removeEvents(),e=this.yEvents,this.options.disableResize||this.win.bind(b,e[b]),this.iOSNativeScrolling||(this.ySlider.bind(h,e[u]),this.yPane.bind(h,e[g]).bind(""+v+" "+o,e[N])),this.$content.bind(""+E+" "+v+" "+o+" "+x,e[E])},f.prototype.removeEvents=function(){var e;e=this.yEvents,this.win.unbind(b,e[b]),this.iOSNativeScrolling||(this.ySlider.unbind(),this.yPane.unbind()),this.$content.unbind(""+E+" "+v+" "+o+" "+x,e[E])},f.prototype.generate=function(){var e,t,n,r,i;return n=this.options,r=n.paneClassY,i=n.sliderClass,e=n.contentClass,!this.$el.find(""+r).length&&!this.$el.find(""+i).length&&this.$el.append('<div class="'+r+'"><div class="'+i+'" /></div>'),this.yPane=this.$el.children("."+r),this.ySlider=this.yPane.find("."+i),s&&(t=this.$el.css("direction")==="rtl"?{left:-s}:{right:-s},this.$el.addClass("has-scrollbar")),t!=null&&this.$content.css(t),this},f.prototype.restore=function(){this.stopped=!1,this.yPane.show(),this.addEvents()},f.prototype.reset=function(){var e,t,n,i,o,u,a,f,l;if(this.iOSNativeScrolling){this.contentHeight=this.content.scrollHeight;return}return this.$el.find("."+this.options.paneClassY).length||this.generate().stop(),this.stopped&&this.restore(),e=this.content,n=e.style,i=n.overflowY,r&&this.$content.css({height:this.$content.height()}),t=e.scrollHeight+s,u=this.yPane.outerHeight(),f=parseInt(this.yPane.css("top"),10),o=parseInt(this.yPane.css("bottom"),10),a=u+f+o,l=Math.round(a/t*a),l<this.options.sliderMinHeight?l=this.options.sliderMinHeight:this.options.sliderMaxHeight!=null&&l>this.options.sliderMaxHeight&&(l=this.options.sliderMaxHeight),i===E&&n.overflowX!==E&&(l+=s),this.maxSliderTop=a-l,this.contentHeight=t,this.yPaneHeight=u,this.yPaneOuterHeight=a,this.ySliderHeight=l,this.ySlider.height(l),this.yEvents.scroll(),this.yPane.show(),this.isActive=!0,e.scrollHeight===e.clientHeight||this.yPane.outerHeight(!0)>=e.scrollHeight&&i!==E?(this.yPane.hide(),this.isActive=!1):this.el.clientHeight===e.scrollHeight&&i===E?this.ySlider.hide():this.ySlider.show(),this.yPane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),this},f.prototype.scrollY=function(){if(!this.isActive)return;return this.ySliderY=Math.max(0,this.ySliderY),this.ySliderY=Math.min(this.maxSliderTop,this.ySliderY),this.$content.scrollTop((this.yPaneHeight-this.contentHeight+s)*this.ySliderY/this.maxSliderTop*-1),this.iOSNativeScrolling||this.ySlider.css({top:this.ySliderY}),this},f.prototype.scrollBottom=function(e){if(!this.isActive)return;return this.reset(),this.$content.scrollTop(this.contentHeight-this.$content.height()-e).trigger(v),this},f.prototype.scrollTop=function(e){if(!this.isActive)return;return this.reset(),this.$content.scrollTop(+e).trigger(v),this},f.prototype.scrollTo=function(t){if(!this.isActive)return;return this.reset(),this.scrollTop(e(t).get(0).offsetTop),this},f.prototype.stop=function(){return this.stopped=!0,this.removeEvents(),this.yPane.hide(),this},f.prototype.flash=function(){var e=this;if(!this.isActive)return;return this.reset(),this.yPane.addClass("flashed"),setTimeout(function(){e.yPane.removeClass("flashed")},this.options.flashDelay),this},f}(),e.fn.nanoScroller=function(t){return this.each(function(){var n,r;(r=this.nanoscroller)||(!t.paneClassY&&t.paneClass&&(t.paneClassY=t.paneClass),n=e.extend({},C,t),this.nanoscroller=r=new m(this,n));if(t&&typeof t=="object"){e.extend(r.options,t);if(t.scrollBottom)return r.scrollBottom(t.scrollBottom);if(t.scrollTop)return r.scrollTop(t.scrollTop);if(t.scrollTo)return r.scrollTo(t.scrollTo);if(t.scroll==="bottom")return r.scrollBottom(0);if(t.scroll==="top")return r.scrollTop(0);if(t.scroll&&t.scroll instanceof e)return r.scrollTo(t.scroll);if(t.stop)return r.stop();if(t.flash)return r.flash()}return r.reset()})}})(jQuery,window,document);