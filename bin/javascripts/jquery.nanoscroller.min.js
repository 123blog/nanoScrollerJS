(function(){(function(c){var d;d=function(){function a(b){this.target=b;this.generateElements();this.createEventHandlers();this.assignListeners();this.reset()}a.prototype.slider=null;a.prototype.pane=null;a.prototype.content=null;a.prototype.scrollHeight=0;a.prototype.sliderHeight=0;a.prototype.paneHeight=0;a.prototype.sliderY=0;a.prototype.offsetY=0;a.prototype.contentHeight=0;a.prototype.contentY=0;a.prototype.createEventHandlers=function(){var b;b=this;this.handler=[];this.handler.onDown=function(a){b.offsetY=
a.clientY-b.slider.offset().top;c(document).bind("mousemove",b.handler.onDrag);c(document).bind("mouseup",b.handler.onUp);return!1};this.handler.onWheel=function(a){b.sliderY+=0.1*a.wheelDeltaY||a.wheelDelta||a.detail;b.scroll();a=c.event.fix(a);a.preventDefault();return!1};this.handler.onDrag=function(a){b.sliderY=a.clientY-b.target.offset().top-b.offsetY;b.scroll();return!1};this.handler.onUp=function(){c(document).unbind("mousemove",b.handler.onDrag);c(document).unbind("mouseup",b.handler.onUp);
return!1};this.handler.onResize=function(){b.reset();return b.scroll()};return this.handler.onDragPane=function(a){b.sliderY=a.clientY-b.target.offset().top-b.offsetY-0.5*b.sliderHeight;b.scroll();return b.handler.onDown(a)}};a.prototype.assignListeners=function(){this.slider.bind("mousedown",this.handler.onDown);this.pane.bind("mousedown",this.handler.onDragPane);c(window).bind("resize",this.handler.onResize);this.content[0].addEventListener("DOMMouseScroll",this.handler.onWheel,!1);this.content[0].addEventListener("mousewheel",
this.handler.onWheel,!1)};a.prototype.removeEventListeners=function(){this.slider.unbind("mousedown",this.handler.onDown);c(window).unbind("resize",this.handler.onResize);this.content[0].removeEventListener("DOMMouseScroll",this.handler.onWheel,!1);return this.content[0].removeEventListener("mousewheel",this.handler.onWheel,!1)};a.prototype.generateElements=function(){this.target.append('<div class="pane"><div class="slider"></div></div>');this.content=c(this.target.children()[0]);this.slider=this.target.find(".slider");
this.pane=this.target.find(".pane")};a.prototype.reset=function(){this.contentHeight=this.content[0].scrollHeight;this.paneHeight=this.pane.innerHeight();this.sliderHeight=this.paneHeight/this.contentHeight;this.sliderHeight*=this.paneHeight;this.scrollHeight=this.paneHeight-this.sliderHeight;this.slider.height(this.sliderHeight)};a.prototype.scroll=function(){var a;if(0>this.sliderY)this.sliderY=0;if(this.sliderY>this.scrollHeight)this.sliderY=this.scrollHeight;a=this.paneHeight-this.contentHeight;
a=a*this.sliderY/this.scrollHeight;this.content.scrollTop(-a);this.slider.css({top:this.sliderY})};a.prototype.scrollBottom=function(){this.reset();this.sliderY=this.scrollHeight;this.scroll()};a.prototype.scrollTop=function(){this.reset();this.sliderY=0;this.scroll()};return a}();return c.fn.nanoScroller=function(a){var b,a=a||{};b=this.data("scrollbar");if(void 0===b)b=new d(this,a),this.data({scrollbar:b});else return!0===a.update&&b.reset(),"bottom"===a.scroll&&b.scrollBottom(),"top"===a.scroll&&
b.scrollTop(),!0===a.stop&&b.stop(),!1}})(jQuery)}).call(this);
