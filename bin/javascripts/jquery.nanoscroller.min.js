(function(){var c,d;c=this.jQuery;d=function(){function b(a){this.content=this.pane=this.slider=null;this.contentY=this.contentHeight=this.offsetY=this.sliderY=this.paneHeight=this.sliderHeight=this.scrollHeight=0;this.target=a;this.generateElements();this.createEventHandlers();this.assignListeners();this.reset()}b.prototype.createEventHandlers=function(){var a;a=this;this.handler=[];this.handler.onDown=function(b){a.offsetY=b.clientY-a.slider.offset().top;c(document).bind("mousemove",a.handler.onDrag);
c(document).bind("mouseup",a.handler.onUp);return!1};this.handler.onWheel=function(b){b.preventDefault();a.sliderY+=b.wheelDeltaY||b.wheelDelta||b.detail;a.scroll();c.event.fix(b);return!1};this.handler.onDrag=function(b){a.sliderY=b.clientY-a.target.offset().top-a.offsetY;a.scroll();return!1};this.handler.onUp=function(){c(document).unbind("mousemove",a.handler.onDrag);c(document).unbind("mouseup",a.handler.onUp);return!1};this.handler.onResize=function(){a.reset();return a.scroll()};return this.handler.onDragPane=
function(b){a.sliderY=b.clientY-a.target.offset().top-0.5*a.sliderHeight;a.scroll();return a.handler.onDown(b)}};b.prototype.assignListeners=function(){c(window).bind("resize",this.handler.onResize);this.slider.bind("mousedown",this.handler.onDown);this.pane.bind("mousedown",this.handler.onDragPane);this.target[0].addEventListener("DOMMouseScroll",this.handler.onWheel,!1);this.target[0].addEventListener("mousewheel",this.handler.onWheel,!1)};b.prototype.removeEventListeners=function(){c(window).unbind("resize",
this.handler.onResize);this.slider.unbind("mousedown",this.handler.onDown);this.pane.unbind("mousedown",this.handler.onDragPane);this.target[0].removeEventListener("DOMMouseScroll",this.handler.onWheel,!1);this.target[0].removeEventListener("mousewheel",this.handler.onWheel,!1)};b.prototype.generateElements=function(){this.target.append('<div class="pane"><div class="slider"></div></div>');this.content=c(this.target.children()[0]);this.slider=this.target.find(".slider");this.pane=this.target.find(".pane")};
b.prototype.reset=function(){this.contentHeight=this.content[0].scrollHeight;this.paneHeight=this.pane.innerHeight();this.sliderHeight=this.paneHeight/this.contentHeight;this.sliderHeight*=this.paneHeight;this.scrollHeight=this.paneHeight-this.sliderHeight;this.slider.height(this.sliderHeight)};b.prototype.scroll=function(){var a;if(0>this.sliderY)this.sliderY=0;if(this.sliderY>this.scrollHeight)this.sliderY=this.scrollHeight;a=this.paneHeight-this.contentHeight;a=a*this.sliderY/this.scrollHeight;
switch("old"){case "old":this.target.addClass("old");this.content.scrollTop(-a);this.slider.css({top:this.sliderY});break;default:this.content.css({"-webkit-transform":"translateY("+a+"px)","-moz-transform":"translateY("+a+"px)","-o-transform":"translateY("+a+"px)","-transform":"translateY("+a+"px)"}),this.slider.css({"-webkit-transform":"translateY("+this.sliderY+"px)","-moz-transform":"translateY("+this.sliderY+"px)","-o-transform":"translateY("+this.sliderY+"px)","-transform":"translateY("+this.sliderY+
"px)"})}};b.prototype.scrollBottom=function(){this.reset();this.sliderY=this.scrollHeight;this.scroll()};b.prototype.scrollTop=function(){this.reset();this.sliderY=0;this.scroll()};return b}();c.fn.nanoScroller=function(b){var a,b=b||{};a=this.data("scrollbar");if(void 0===a)a=new d(this,b),this.data({scrollbar:a});else return!0===b.update&&a.reset(),"bottom"===b.scroll&&a.scrollBottom(),"top"===b.scroll&&a.scrollTop(),!0===b.stop&&a.stop(),!1}}).call(this);