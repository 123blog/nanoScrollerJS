((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;a=this.jQuery,p="scrollbar",l="scroll",e="mousedown",f="mousemove",h="mousewheel",g="mouseup",k="resize",d="drag",m="up",j="panedown",b="DOMMouseScroll",c="down",n="wheel",o=function(){var a,b,c;return b=document.createElement("div"),b.style.position="absolute",b.style.width="100px",b.style.height="100px",b.style.overflow="scroll",document.body.appendChild(b),a=b.offsetWidth,c=b.scrollWidth,document.body.removeChild(b),a-c},i=function(){function d(a){this.el=a,this.generate(),this.createEvents(),this.addEvents(),this.reset();return}return d.prototype.createEvents=function(){var b=this;return this.events={down:function(c){return b.isDrag=!0,b.offsetY=c.clientY-b.slider.offset().top,b.pane.addClass("active"),a(document).bind(f,b.events.drag),a(document).bind(g,b.events.up),!1},drag:function(a){return b.sliderY=a.clientY-b.el.offset().top-b.offsetY,b.scroll(),!1},up:function(c){return b.isDrag=!1,b.pane.removeClass("active"),a(document).unbind(f,b.events.drag),a(document).unbind(g,b.events.up),!1},resize:function(a){b.reset()},panedown:function(a){b.sliderY=a.clientY-b.el.offset().top-b.sliderH*.5,b.scroll(),b.events.down(a)},scroll:function(a){var c,d;c=b.content[0];if(b.isDrag===!0)return;d=c.scrollTop/(c.scrollHeight-c.clientHeight)*(b.paneH-b.sliderH),b.slider.css({top:d+"px"})},wheel:function(a){return b.sliderY+=-a.wheelDeltaY||-a.delta,b.scroll(),!1}}},d.prototype.addEvents=function(){var d,f;d=this.events,f=this.pane,a(window).bind(k,d[k]),this.slider.bind(e,d[c]),f.bind(e,d[j]),this.content.bind(l,d[l]),window.addEventListener&&(f=f[0],f.addEventListener(h,d[n]),f.addEventListener(b,d[n]))},d.prototype.removeEvents=function(){var d,f;d=this.events,f=this.pane,a(window).unbind(k,d[k]),this.slider.unbind(e,d[c]),f.unbind(e,d[j]),this.content.unbind(l,d[l]),window.addEventListener&&(f=f[0],f.removeEventListener(h,d[n]),f.removeEventListener(b,d[n]))},d.prototype.generate=function(){this.el.append('<div class="pane"><div class="slider"></div></div>'),this.content=a(this.el.children()[0]),this.slider=this.el.find(".slider"),this.pane=this.el.find(".pane"),this.scrollW=o(),this.scrollbarWidth===0&&(this.scrollW=0),this.content.css({right:-this.scrollW+"px"}),a.browser.msie!=null&&parseInt(a.browser.version)<8&&this.pane.hide()},d.prototype.reset=function(){this.isDead===!0&&(this.isDead=!1,this.pane.show(),this.addEvents()),this.contentH=this.content[0].scrollHeight+this.scrollW,this.paneH=this.pane.outerHeight(),this.sliderH=this.paneH/this.contentH*this.paneH,this.sliderH=Math.round(this.sliderH),this.scrollH=this.paneH-this.sliderH,this.slider.height(this.sliderH),this.paneH>=this.content[0].scrollHeight?this.pane.hide():this.pane.show()},d.prototype.scroll=function(){var a;return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.scrollH,this.sliderY),a=this.paneH-this.contentH+this.scrollW,a=a*this.sliderY/this.scrollH,this.content.scrollTop(-a),this.slider.css({top:this.sliderY})},d.prototype.scrollBottom=function(a){this.reset(),this.content.scrollTop(this.contentH-this.content.height()-a)},d.prototype.scrollTop=function(a){this.reset(),this.content.scrollTop(a+0)},d.prototype.stop=function(){this.isDead=!0,this.removeEvents(),this.pane.hide()},d}(),a.fn.nanoScroller=function(a){var b;a||(a={}),b=this.data(p);if(b===void 0){b=new i(this),this.data({xasd:b});return}return a.scrollBottom?b.scrollBottom(a.scrollBottom):a.scrollTop?b.scrollTop(a.scrollTop):a.scroll==="bottom"?b.scrollBottom(0):a.scroll==="top"?b.scrollTop(0):a.stop===!0?b.stop():b.reset()}})).call(this);